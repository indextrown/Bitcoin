import pyupbit
import time
from dotenv import load_dotenv
import os

# key 받아오기 및 업비트 객체 생성
load_dotenv()
ACCESS_KEY = os.getenv("ACCESS_KEY")
SECRET_KEY = os.getenv("SECRET_KEY") 
upbit = pyupbit.Upbit(ACCESS_KEY, SECRET_KEY)

tickers = pyupbit.get_tickers("KRW")

for ticker in tickers:
    if ticker == "KRW-BTC":
        df = pyupbit.get_ohlcv(ticker, interval="minute15")
        print(df)
        break


# df = pyupbit.get_ohlcv(ticker, interval="day")
#                             open         high          low        close      volume(거래량)   value
# 2025-02-06 09:00:00  151450000.0  153925000.0  150011000.0  151356000.0  1873.914568  2.849460e+11
# 2025-02-07 09:00:00  151359000.0  154000000.0  148730000.0  149601000.0  2959.781080  4.457035e+11
# 2025-02-08 09:00:00  149602000.0  150220000.0  147994000.0  148803000.0  1087.257028  1.616837e+11
# 2025-02-09 09:00:00  148873000.0  149819000.0  146197000.0  147579000.0  1566.083571  2.316749e+11
# 2025-02-10 09:00:00  147602000.0  148830000.0  146000000.0  147724000.0  1480.957658  2.184237e+11
# ...                          ...          ...          ...          ...          ...           ...
# 2025-08-20 09:00:00  157180000.0  159565000.0  157100000.0  159149000.0  1687.535848  2.679518e+11
# 2025-08-21 09:00:00  159237000.0  159900000.0  157280000.0  157737000.0  1101.964876  1.746050e+11
# 2025-08-22 09:00:00  157737000.0  162688000.0  156647000.0  161176000.0  3303.070602  5.292236e+11
# 2025-08-23 09:00:00  161176000.0  161505000.0  159000000.0  159705000.0  1231.277451  1.969158e+11
# 2025-08-24 09:00:00  159705000.0  160272000.0  159380000.0  159393000.0   429.817167  6.867160e+10

